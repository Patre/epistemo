\DeclareOptionBeamer{compress}{\beamer@compresstrue}
\ProcessOptionsBeamer

\mode<presentation>

\useoutertheme[footline=authortitle]{miniframes}
\useinnertheme{circles}
\usecolortheme{whale}
\usecolortheme{orchid}

\definecolor{beamer@blendedred}{rgb}{0.443,0.050,0.0}
\definecolor{beamer@blendedgreen}{rgb}{0.0,0.6,0.0}
\definecolor{beamer@blendedblue}{rgb}{0.137,0.466,0.741}

\setbeamercolor{structure}{fg=beamer@blendedgreen}
\setbeamercolor{titlelike}{parent=structure}
\setbeamercolor{frametitle}{fg=black}
\setbeamercolor{title}{fg=black}
\setbeamercolor{item}{fg=black}

\newcommand{\footlineextra}[1]{\gdef\insertfootlineextra{#1}}
\newbox\footlineextrabox

\defbeamertemplate*{footline extra}{default}
{
	\begin{beamercolorbox}[wd=.34\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm plus1fill,rightskip=.3cm]{author in head/foot}%
	\insertfootlineextra
	\end{beamercolorbox}
}

\setbeamertemplate{footline}
{
	\leavevmode
	\begin{beamercolorbox}[wd=.65\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
		\usebeamerfont{title in head/foot}\insertframenumber/\inserttotalframenumber~ \inserttitle
	\end{beamercolorbox}
	\setbox\footlineextrabox=\vbox{\usebeamertemplate*{footline extra}}
	%\vskip -\ht\footlineextrabox
	%\vskip -\dp\footlineextrabox
	\box\footlineextrabox%
}

\let\beamer@original@frame=\frame
\def\frame{\gdef\insertfootlineextra{}\beamer@original@frame}
\footlineextra{}
\makeatother


\defbeamertemplate*{headline}{}
{
  \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex]{section in head/foot}%
    \insertsectionnavigationhorizontal{\paperwidth}{}{}%
  \end{beamercolorbox}%

  \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex]{subsection in head/foot}
    \usebeamerfont{subsection in head/foot}
    \insertsubsectionnavigationhorizontal{\paperwidth}{}{\hskip0pt plus1filll%
    }%
  \end{beamercolorbox}%
}

\mode
<all>
